<!DOCTYPE html>
<html>
  <head>
    <title>适配测试</title>
    <script src="js/vue.js"></script>
    <script src="js/datav.map.vue.js"></script>
    <script src="js/jwmeyy.js"></script>
    <link rel="stylesheet" href="css/shipei.css" />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/wow.js"></script>
    <script>
      new WOW().init();
    </script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <script src="js/axios.min.js"></script>
    <style>
      [v-cloak] {
        display: none;
      }
    </style>
  </head>

  <body>
    <div id="app" v-cloak>
      <div class="container">
        <div class="top" id="title" onclick="parent.toggleFullScreen()">
          <p>中国化工行业信创适配中心</p>
        </div>
        <div class="content">
          <div class="con_left">
            <div class="left_box_1">
              <div class="left_box_1_t">
                <img class="img" src="images/sanjiao.png" alt="" />
                <p>送测项目数量</p>
                <img src="images/sanjiao.png" alt="" />
              </div>
              <div class="left_box_1_b">
                <div id="icharts_1" class="icharts_1"></div>
              </div>
            </div>

            <div class="left_box_2">
              <div class="left_box_2_t">
                <img class="img" src="images/sanjiao.png" alt="" />
                <p>已适配项目数量</p>
                <img src="images/sanjiao.png" alt="" />
              </div>
              <div class="left_box_2_b">
                <div id="icharts_2" class="icharts_2"></div>
              </div>
            </div>
          </div>

          <div class="con_mid">
            <div class="mid_nav zoomIn">
              <a class="mid_nav1" href="zhihui.html">
                <p>指挥中心</p>
              </a>
              <a class="mid_nav1 active" href="shipei.html">
                <p>适配测试</p>
              </a>
              <a class="mid_nav1" href="chengguo.html">
                <p>信创成果</p>
              </a>
              <a class="mid_nav1" href="rencai.html">
                <p>信创人才</p>
              </a>
              <a class="mid_nav1" href="ziyuan.html">
                <p>平台资源</p>
              </a>
            </div>

            <div class="mid_con zoomIn">
              <div class="mid_con_1">
                <div class="mid_con_1_t">
                  <img src="images/shebei_1.png" alt="" />
                  <p>{{alldata.送测项目数}}</p>
                  <img class="img" src="images/shebei_1.png" alt="" />
                </div>
                <div class="mid_con_1_t_t">
                  <p>送测项目数</p>
                </div>
                <div class="mid_con_3_m">
                  <img src="images/shebei_2.png" alt="" />
                  <img src="images/shebei_2_1.png" alt="" />
                </div>
                <div class="mid_con_1_b">
                  <img src="images/shebei_3.png" alt="" />
                </div>
              </div>

              <div class="mid_con_2 zoomIn">
                <div class="mid_con_2_1">
                  <div class="mid_con_2_t">
                    <img src="images/shebei_1.png" alt="" />
                    <p>{{alldata.正在适配项目数}}</p>
                    <img class="img" src="images/shebei_1.png" alt="" />
                  </div>
                  <div class="mid_con_2_t_t">
                    <p>正在适配项目数</p>
                  </div>
                  <div class="mid_con_3_m">
                    <img src="images/shebei_2.png" alt="" />
                    <img src="images/shebei_2_1.png" alt="" />
                  </div>
                  <div class="mid_con_2_b">
                    <img src="images/shebei_3.png" alt="" />
                  </div>
                </div>
                <div class="mid_con_2_1">
                  <div class="mid_con_2_t">
                    <img src="images/shebei_1.png" alt="" />
                    <p>{{alldata.已适配项目数}}</p>
                    <img class="img" src="images/shebei_1.png" alt="" />
                  </div>
                  <div class="mid_con_2_t_t">
                    <p>已适配项目数</p>
                  </div>
                  <div class="mid_con_3_m">
                    <img src="images/shebei_2.png" alt="" />
                    <img src="images/shebei_2_1.png" alt="" />
                  </div>
                  <div class="mid_con_2_b">
                    <img src="images/shebei_3.png" alt="" />
                  </div>
                </div>
              </div>

              <div class="mid_con_3 zoomIn">
                <div class="mid_con_3_1">
                  <div class="mid_con_3_t">
                    <img src="images/shebei_1.png" alt="" />
                    <p>{{alldata.导出次数}}</p>
                    <img class="img" src="images/shebei_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_t_t">
                    <p>导出次数</p>
                  </div>
                  <div class="mid_con_3_m">
                    <img src="images/shebei_2.png" alt="" />
                    <img src="images/shebei_2_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_b">
                    <img src="images/shebei_3.png" alt="" />
                  </div>
                </div>
                <div class="mid_con_3_1">
                  <div class="mid_con_3_t">
                    <img src="images/shebei_1.png" alt="" />
                    <p>{{alldata.CNAS报告数}}</p>
                    <img class="img" src="images/shebei_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_t_t">
                    <p>CNAS报告数</p>
                  </div>
                  <div class="mid_con_3_m">
                    <img src="images/shebei_2.png" alt="" />
                    <img src="images/shebei_2_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_b">
                    <img src="images/shebei_3.png" alt="" />
                  </div>
                </div>
                <div class="mid_con_3_1">
                  <div class="mid_con_3_t">
                    <img src="images/shebei_1.png" alt="" />
                    <p>{{alldata.自测报告}}</p>
                    <img class="img" src="images/shebei_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_t_t">
                    <p>自测报告数</p>
                  </div>
                  <div class="mid_con_3_m">
                    <img src="images/shebei_2.png" alt="" />
                    <img src="images/shebei_2_1.png" alt="" />
                  </div>
                  <div class="mid_con_3_b">
                    <img src="images/shebei_3.png" alt="" />
                  </div>
                </div>
              </div>

              <div class="mid_con_4 zoomIn">
                <img src="images/shipeibg.png" alt="" />
                <!-- <canvas id="can" width="750" height="400" style="max-width: 800px; width: 100%; position: absolute; left: 50%; top: -70px; transform: translate(-50%, -50%);border-radius: 30%;"></canvas> -->
              </div>

              <div class="mid_con_7"></div>
              <div class="bottom_circle">
                <div class="bottom_circle1"></div>
                <div class="bottom_circle2"></div>
                <div class="bottom_circle3"></div>
                <div class="bottom_circle4"></div>
              </div>
            </div>
          </div>

          <div class="con_right">
            <div class="right_box_1">
              <div class="right_box_1_t">
                <img class="img" src="images/sanjiao.png" alt="" />
                <p>正在适配项目</p>
                <img src="images/sanjiao.png" alt="" />
              </div>
              <div class="biaoji">
                <div class="biaoji_1">
                  <img src="images/s_2.png" alt="" />
                  <p>测试用例数量</p>
                </div>
                <div class="biaoji_1">
                  <img src="images/s_1.png" alt="" />
                  <p>缺陷数量</p>
                </div>
              </div>
              <div class="right_box_1_b">
                <div id="icharts_5" class="icharts_5"></div>
              </div>
            </div>

            <div class="right_box_2">
              <div class="right_box_2_t">
                <img class="img" src="images/sanjiao.png" alt="" />
                <p>报告情况</p>
                <img src="images/sanjiao.png" alt="" />
              </div>
              <div class="right_box_2_b">
                <div id="icharts_3" class="icharts_3"></div>
              </div>

              <div class="newbiaoji">
                <ul>
                  <li v-for="(item,index) in seriesData3">
                    <p>{{item.value}}</p>
                    <i></i>
                    <p>{{item.name}}</p>
                  </li>
                  <!-- <li>
                  <p>18</p>
                  <i></i>
                  <p>CNAS报告</p>
                </li>
                <li>
                  <p>14</p>
                  <i></i>
                  <p>自测报告</p>
                </li> -->
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var app = new Vue({
        el: "#app",
        data: {
          alldata: "",
          web: "/api",
          songcetime: [],
          songcenum: [],
          shipeitime: [],
          shipeinum: [],
          yonglitime: [],
          yonglinum: [],
          quexiantime: [],
          quexiannum: [],
          seriesData3: [],
        },
        watch: {
          songcenum() {
            this.drawsongce();
          },
          shipeinum() {
            this.drawshipei();
          },
          yonglinum() {
            this.drawxiangmu();
          },
          seriesData3() {
            this.drawbaogao();
          },
        },
        methods: {
          //控制字体
          fontSize(res) {
            var docEl = document.documentElement,
              clientWidth =
                window.innerWidth ||
                document.documentElement.clientWidth ||
                document.body.clientWidth;
            if (!clientWidth) return;
            return (res * clientWidth) / 1920;
          },

          //数据概览
          getall() {
            axios({
              mehtod: "get",
              url: this.web + "/screen/project/stat",
            })
              .then((result) => {
                console.log(result.data);
                this.alldata = result.data;
              })
              .catch((err) => {});
          },

          //送测项目数
          getsongce() {
            axios({
              method: "get",
              url: this.web + "/screen/project/prepare",
            })
              .then((result) => {
                console.log(result.data);
                for (var i = 0; i < result.data.length; i++) {
                  this.songcenum.push(result.data[i].数量);
                  this.songcetime.push(result.data[i].创建时间);
                }
              })
              .catch((err) => {});
          },
          // 送测项目图表
          drawsongce() {
            var myChart1 = echarts.init(document.getElementById("icharts_1"));
            myChart1.setOption({
              grid: {
                left: 30,
                right: 30,
                top: 30,
                bottom: 10,
                containLabel: true,
              },
              tooltip: {
                trigger: "axis",
                axisPointer: {
                  type: "shadow",
                  shadowStyle: { color: "rgba(0,156,255,0.2)" },
                  z: 1,
                },
                padding: [15, 22],
                backgroundColor: "rgba(0,0,0,0.9)",
                borderColor: "#01a3ce",
                borderWidth: 1,
                textStyle: {
                  fontSize: this.fontSize(16),
                  lineHeight: this.fontSize(32),
                  color: "#ffffff",
                },
              },
              xAxis: {
                data: this.songcetime,
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "#0187c4", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#9ba2b2" },
                  margin: this.fontSize(25),
                  interval: 0,
                  rotate: 20,
                },
                splitLine: { show: false },
              },
              yAxis: {
                type: "value",
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "#0187c4", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#9ba2b2" },
                  opacity: 0.7,
                  margin: 15,
                },
                splitLine: {
                  show: true,
                  lineStyle: { color: "#3cd1ff", width: 1, opacity: 0.2 },
                },
                min: 0,
                max: 120,
              },
              animationDelay: 900,
              animationDuration: 2000,
              animationDurationUpdate: 800,
              series: [
                // {
                //   type: 'pictorialBar',
                //   z: 13,
                //   symbolSize: [15, 8],
                //   symbolOffset: [0, -5],
                //   symbolPosition: 'end',
                //   tooltip: { show: false },
                //   itemStyle: { color: '#0064aa' },
                //   emphasis: {
                //     itemStyle: { color: '#f3a72f' },
                //   },

                //   data: data1y,
                // },
                {
                  type: "bar",
                  z: 12,
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#4988f9" },
                      { offset: 1, color: "rgba(0,146,255,0.05)" },
                    ]),
                  },
                  label: {
                    show: true,
                    position: "top",
                    distance: this.fontSize(15),
                    fontSize: this.fontSize(14),
                    color: "#3cd1ff",
                    lineHeight: this.fontSize(30),
                    fontFamily: "DIN-Medium",
                  },
                  emphasis: {
                    label: { color: "#f3a72f" },
                    itemStyle: {
                      color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: "#f3a72f" },
                        { offset: 1, color: "rgba(243,167,47,0.05)" },
                      ]),
                    },
                  },
                  barWidth: this.fontSize(15),
                  data: this.songcenum,
                },
              ],
            });
          },

          //已适配项目数量
          getshipei() {
            axios({
              method: "get",
              url: this.web + "/screen/project/complete",
            })
              .then((result) => {
                console.log(result.data);
                for (var i = 0; i < result.data.length; i++) {
                  this.shipeinum.push(result.data[i].数量);
                  this.shipeitime.push(result.data[i].创建时间);
                }
              })
              .catch((err) => {});
          },

          //适配项目图表
          drawshipei() {
            var myChart2 = echarts.init(document.getElementById("icharts_2"));
            myChart2.setOption({
              grid: {
                left: 30,
                right: 30,
                top: 30,
                bottom: 10,
                containLabel: true,
              },
              tooltip: {
                trigger: "axis",
                axisPointer: {
                  type: "line",
                  lineStyle: {
                    color: "#00c9fb",
                    opacity: 0.7,
                    type: "dashed",
                    width: 1,
                  },
                  z: 1,
                },
                padding: [15, 22],
                backgroundColor: "rgba(0,0,0,0.9)",
                borderColor: "#01a3ce",
                borderWidth: 1,
                textStyle: {
                  fontSize: this.fontSize(16),
                  lineHeight: this.fontSize(32),
                  color: "#ffffff",
                },
              },
              xAxis: {
                data: this.shipeitime,
                boundaryGap: false,
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "#0187c4", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#a8b2be" },
                  margin: this.fontSize(20),
                  interval: 0,
                  rotate: 20,
                },
                splitLine: { show: false },
              },
              yAxis: {
                type: "value",
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "#0187c4", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#a8b2be" },
                  opacity: 0.7,
                  margin: this.fontSize(15),
                },
                splitLine: {
                  show: true,
                  lineStyle: { color: "#a8b2be", width: 1, opacity: 0.2 },
                },
                min: 0,
                max: 50,
              },
              animationDelay: 900,
              animationDuration: 2000,
              animationDurationUpdate: 800,
              series: [
                {
                  type: "line",
                  symbol: "circle",
                  symbolSize: this.fontSize(5),
                  showSymbol: false,
                  smooth: true,
                  areaStyle: {
                    show: true,
                    shadowColor: "rgba(0, 0, 0, 0.7)",
                    shadowBlur: this.fontSize(10),
                  },
                  itemStyle: {
                    color: "#00a1f4",
                    borderColor: "#ffffff",
                    borderWidth: 3,
                    borderType: "solid",
                  },
                  lineStyle: { color: "#00a1f4", width: 2 },
                  areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#00a1f4" },
                      { offset: 1, color: "transparent" },
                    ]),
                    opacity: 0.35,
                  },
                  data: this.shipeinum,
                },
              ],
            });
          },

          //适配项目
          getxiangmu() {
            axios({
              method: "get",
              url: this.web + "/screen/project/pending",
            })
              .then((result) => {
                console.log(result.data);
                console.log(result.data["用例数量"]);
                for (var i = 0; i < result.data["用例数量"].length; i++) {
                  this.yonglitime.push(result.data["用例数量"][i].创建时间);
                  this.yonglinum.push(result.data["用例数量"][i].数量);
                }
                for (var i = 0; i < result.data["缺陷数量"].length; i++) {
                  this.quexiantime.push(result.data["缺陷数量"][i].创建时间);
                  this.quexiannum.push(result.data["缺陷数量"][i].数量);
                }
                console.log(this.yonglinum);
              })
              .catch((err) => {});
          },

          //适配项目图表
          drawxiangmu() {
            var myChart5 = echarts.init(document.getElementById("icharts_5"));
            myChart5.setOption({
              grid: {
                left: 30,
                right: 30,
                top: 30,
                bottom: 10,
                containLabel: true,
              },
              tooltip: {
                trigger: "axis",
                axisPointer: {
                  type: "line",
                  lineStyle: {
                    color: "#00c9fb",
                    opacity: 0.7,
                    type: "dashed",
                    width: 1,
                  },
                  z: 1,
                },
                padding: [15, 22],
                backgroundColor: "rgba(0,0,0,0.9)",
                borderColor: "#01a3ce",
                borderWidth: 1,
                textStyle: {
                  fontSize: this.fontSize(14),
                  lineHeight: this.fontSize(32),
                  color: "#ffffff",
                },
              },
              xAxis: {
                data: this.yonglitime,
                boundaryGap: false,
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "transparent", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#39578b" },
                  margin: this.fontSize(15),
                  interval: 0,
                  rotate: 20,
                },
                splitLine: { show: false },
              },
              yAxis: {
                position: "right",
                type: "value",
                axisLine: { show: false },
                axisTick: {
                  show: true,
                  lineStyle: { color: "transparent", width: 1, opacity: 1 },
                },
                axisLabel: {
                  textStyle: { fontSize: this.fontSize(12), color: "#39578b" },
                  opacity: 0.7,
                  margin: this.fontSize(15),
                },
                splitLine: {
                  show: true,
                  lineStyle: { color: "#13375c", width: 1, opacity: 0.2 },
                },
                min: 0,
                max: 20,
              },
              animationDelay: 900,
              animationDuration: 2000,
              animationDurationUpdate: 800,
              series: [
                {
                  type: "line",
                  name: "测试用例数量",
                  symbol: "circle",
                  symbolSize: this.fontSize(12),
                  showSymbol: false,
                  smooth: true,
                  itemStyle: {
                    color: "#02a8fe",
                    borderColor: "#ffffff",
                    borderWidth: 3,
                    borderType: "solid",
                  },
                  lineStyle: { color: "#02a8fe", width: 1 },
                  areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#02a8fe" },
                      { offset: 1, color: "transparent" },
                    ]),
                    opacity: 0.3,
                  },
                  data: this.yonglinum,
                },
                {
                  type: "line",
                  name: "缺陷数据量",
                  symbol: "circle",
                  symbolSize: this.fontSize(12),
                  showSymbol: false,
                  smooth: true,
                  itemStyle: {
                    color: "#00f3fe",
                    borderColor: "#ffffff",
                    borderWidth: 3,
                    borderType: "solid",
                  },
                  lineStyle: { color: "#00f3fe", width: 1 },
                  areaStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#00f3fe" },
                      { offset: 1, color: "transparent" },
                    ]),
                    opacity: 0.3,
                  },
                  data: this.quexiannum,
                },
              ],
            });
          },

          //报告情况
          getbaogao() {
            axios({
              method: "get",
              url: this.web + "/screen/project/report",
            })
              .then((res) => {
                console.log(res.data);
                console.log(Object.keys(res.data));
                console.log(Object.values(res.data));
                for (var i = 0; i < Object.keys(res.data).length; i++) {
                  this.seriesData3.push({
                    name: Object.keys(res.data)[i],
                    value: Object.values(res.data)[i],
                  });
                }
                var s = 0;
                for (var i = Object.values(res.data).length - 1; i >= 0; i--) {
                  undefined;

                  s += Object.values(res.data)[i];
                }

                console.log(s);
                this.qiuzong = s;
                console.log(this.seriesData3);
              })
              .catch((err) => {});
          },

          //报告情况图表
          drawbaogao() {
            var myChart3 = echarts.init(document.getElementById("icharts_3"));
            myChart3.setOption({
              title: {
                text: this.qiuzong,
                subtext: "共计",
                left: "center",
                top: "center",
                textStyle: {
                  color: "#fff",
                  fontSize: this.fontSize(25),
                  fontWeight: "bold",
                },
                subtextStyle: {
                  color: "#6a94ce",
                  fontSize: this.fontSize(17),
                },
              },
              color: ["#fed267", "#01d4cb", "#009eff"],
              tooltip: {
                padding: [15, 22],
                backgroundColor: "rgba(0,0,0,0.9)",
                borderColor: "#01a3ce",
                borderWidth: 1,
                textStyle: {
                  fontSize: this.fontSize(15),
                  lineHeight: this.fontSize(32),
                  color: "#ffffff",
                },
              },
              animationDelay: 900,
              animationDuration: 2000,
              animationDurationUpdate: 800,
              series: [
                {
                  type: "pie",
                  radius: ["46%", "68%"],
                  minAngle: 20,
                  label: {
                    formatter: ["{a|{b}}", "{b|{c}%}"].join("\n"),
                    rich: {
                      a: {
                        fontSize: this.fontSize(15),
                        lineHeight: this.fontSize(32),
                        color: "#6697c2",
                      },
                      b: {
                        fontSize: this.fontSize(13),
                        fontWeight: "bold",
                        lineHeight: this.fontSize(26),
                        color: "#3cd1ff",
                        fontFamily: "DIN-Medium",
                      },
                    },
                  },
                  labelLine: {
                    length: this.fontSize(28),
                    length2: this.fontSize(14),
                  },
                  // itemStyle: { shadowColor: '#000', shadowBlur: 65, shadowOffsetX: '20', shadowOffsetY: '0', },
                  data: this.seriesData3,
                },
              ],
            });
          },
        },
        mounted() {
          this.getall();
          this.getsongce();
          this.getshipei();
          this.getxiangmu();
          this.getbaogao();

          this.drawshipei();
          this.drawsongce();
          this.drawxiangmu();
          this.drawbaogao();
        },
      });
    </script>

    <script>
      setInterval(() => {
        window.location.href = "chengguo.html";
      }, 30000);
    </script>
  </body>
</html>
